React.lazy()ëŠ” **ë¦¬ì•¡íŠ¸ ì•±ì„ â€œí•„ìš”í•  ë•Œë§Œ ê°€ì ¸ì˜¤ëŠ”â€ ë˜‘ë˜‘í•œ ê²Œìœ¼ë¦„ë±…ì´ ë¡œë”**ì…ë‹ˆë‹¤. ğŸ˜
ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…(code splitting)ì„ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ë ˆë²¨ì—ì„œ **ì•„ì£¼ ì‰½ê²Œ** í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì¹œêµ¬ì£ .

---

## 1. ì™œ React.lazy()ê°€ ë“±ì¥í–ˆë‚˜? ğŸ¤”

SPA ê·œëª¨ê°€ ì»¤ì§ˆìˆ˜ë¡ `bundle.js`ê°€ ë¹„ëŒ€í•´ì§‘ë‹ˆë‹¤.

* ì´ˆê¸°ì— í•œ ë²ˆì— ë‹¤ ë‚´ë ¤ë°›ëŠ” ë²ˆë“¤:

  * ğŸ“¦ `Home`, `Dashboard`, `AdminPage`, `Chart`, `Editor`, â€¦
  * ìœ ì €ëŠ” `/` í•œ í˜ì´ì§€ë¥¼ ë³´ë ¤ê³  ë“¤ì–´ì™”ì„ ë¿ì¸ë°ë„ ëª¨ë“  ì½”ë“œê°€ í•œ ë²ˆì— ë‹¤ìš´ë¡œë“œ ë¨
* ê²°ê³¼:

  * ì´ˆê¸° ë¡œë”© ëŠë ¤ì§ â³
  * ëª¨ë°”ì¼Â·3G í™˜ê²½ì—ì„œ ì‚¬ìš©ì ê²½í—˜ ì €í•˜

ê·¸ë˜ì„œ ë‚˜ì˜¨ ê°œë…ì´ **ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…(code splitting)** ì…ë‹ˆë‹¤.

> â€œì§€ê¸ˆ ë‹¹ì¥ í•„ìš” ì—†ëŠ” ì½”ë“œëŠ” ë³„ë„ì˜ ì²­í¬(chunk)ë¡œ ë¶„ë¦¬í•´ì„œ,
> ì‹¤ì œë¡œ ê·¸ í™”ë©´ì— ì§„ì…í•  ë•Œ ë„¤íŠ¸ì›Œí¬ë¡œ ê°€ì ¸ì˜¤ì!â€ ğŸšš

ì›ë˜ëŠ” `import()`(dynamic import) + Webpack/Vite ì„¤ì •ì„ ì§ì ‘ ë‹¤ë£¨ë©´ì„œ êµ¬í˜„í•´ì•¼ í–ˆëŠ”ë°,
**React.lazy() + <Suspense>** ì¡°í•©ìœ¼ë¡œ **ì»´í¬ë„ŒíŠ¸ ë‹¨ì—ì„œ ì•„ì£¼ ìì—°ìŠ¤ëŸ½ê²Œ** ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…ì„ í•  ìˆ˜ ìˆê²Œ ëìŠµë‹ˆë‹¤.

---

## 2. React.lazy() ê¸°ë³¸ ì‚¬ìš©ë²• ğŸ§©

### 2.1. ê¸°ë³¸ ë¬¸ë²•

```jsx
import React, { Suspense } from 'react'

// 1) Lazy ì»´í¬ë„ŒíŠ¸ ì •ì˜
const AdminPage = React.lazy(() => import('./AdminPage'))

export default function App() {
  return (
    <div>
      <h1>My App</h1>

      {/* 2) Suspenseë¡œ ê°ì‹¸ì„œ fallback UI ì œê³µ */}
      <Suspense fallback={<p>Loading admin page...</p>}>
        <AdminPage />
      </Suspense>
    </div>
  )
}
```

í•µì‹¬ í¬ì¸íŠ¸ëŠ” ë”± ë‘ ê°€ì§€ì…ë‹ˆë‹¤.

1. **lazy ì»´í¬ë„ŒíŠ¸ ì •ì˜**

   ```jsx
   const AdminPage = React.lazy(() => import('./AdminPage'))
   ```

   * `() => import('./AdminPage')`
     â†’ dynamic import í•¨ìˆ˜ (Promise ë°˜í™˜)
   * ReactëŠ” ì´ Promiseê°€ **resolveë  ë•Œê¹Œì§€**
     í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¥¼ â€œë¡œë”© ì¤‘ ìƒíƒœâ€ë¡œ ì·¨ê¸‰í•©ë‹ˆë‹¤.

2. **Suspenseë¡œ ê°ì‹¸ê¸°**

   ```jsx
   <Suspense fallback={<p>Loading admin page...</p>}>
     <AdminPage />
   </Suspense>
   ```

   * lazy ì»´í¬ë„ŒíŠ¸ëŠ” ë°˜ë“œì‹œ `Suspense`ë¡œ ê°ì‹¸ì•¼ í•©ë‹ˆë‹¤.
   * Promiseê°€ ì•„ì§ ì™„ë£Œë˜ì§€ ì•Šì€ ë™ì•ˆ **fallback** UIë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
   * Promiseê°€ ëë‚˜ë©´ ì§„ì§œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤.

---

## 3. ë‚´ë¶€ì—ì„œ ì‹¤ì œë¡œ ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ë‚˜? ğŸ”¬

ë Œë”ë§ ê´€ì ì—ì„œ **íƒ€ì„ë¼ì¸**ìœ¼ë¡œ ê·¸ë ¤ ë³´ë©´:

1. ì²˜ìŒ `App` ë Œë”ë§

   * `AdminPage`ëŠ” ì•„ì§ ë‹¤ìš´ë¡œë“œë˜ì§€ ì•Šì•˜ìŒ.
   * `React.lazy()`ê°€ ë‚´ë¶€ì ìœ¼ë¡œ **â€œì•„ì§ ë¡œë”© ì¤‘ì¸ íƒ€ì…â€** ìœ¼ë¡œ í‘œì‹œ.
2. ReactëŠ” íŠ¸ë¦¬ ì•ˆì—ì„œ `AdminPage`ë¥¼ ë§Œë‚˜ìë§ˆì

   * â€œì•„ì§ ì¤€ë¹„ë˜ì§€ ì•Šì€ ì»´í¬ë„ŒíŠ¸ê°€ ìˆì–´ìš”!â€
   * ì´ ë•Œ ìƒìœ„ì— ìˆëŠ” `<Suspense>`ë¥¼ ì°¾ê³ , ê·¸ ìª½ìœ¼ë¡œ â€œë¡œë”© ì¤‘â€ ìƒíƒœë¥¼ ì „íŒŒ.
3. `Suspense`ëŠ” ìì‹ ì˜ `fallback`ì„ ë Œë”ë§

   * `<p>Loading admin page...</p>` ê°€ í™”ë©´ì— í‘œì‹œë¨.
4. í•œí¸, ë¸Œë¼ìš°ì €ëŠ” ë°±ê·¸ë¼ìš´ë“œì—ì„œ
   `import('./AdminPage')`ê°€ ìƒì„±í•œ **ë³„ë„ JS ì²­í¬ íŒŒì¼**ì„ ìš”ì²­ (ì˜ˆ: `AdminPage-abc123.js`)
5. ë„¤íŠ¸ì›Œí¬ ì‘ë‹µì´ ëŒì•„ì™€ì„œ ì²­í¬ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ â†’ `import()` Promise resolve
6. ReactëŠ” ê¸°ë‹¤ë¦¬ë˜ lazy ì»´í¬ë„ŒíŠ¸ íƒ€ì…ì„ ì–»ê³ , ë‹¤ì‹œ ë Œë”ë§ì„ ì‹œë„

   * ì´ì œ `AdminPage`ëŠ” â€œì¤€ë¹„ëœ ì»´í¬ë„ŒíŠ¸â€
   * `fallback` ëŒ€ì‹  `<AdminPage />` ì‹¤ì œ UI ë Œë”ë§

ìš”ì•½í•˜ë©´:

> **lazy**: ì½”ë“œ ë¡œë”©ì´ ëë‚  ë•Œê¹Œì§€ Suspenseì—ê²Œ â€œë‚˜ ì•„ì§ì´ì•¼â€¦â€ë¼ê³  ì•Œë¦¬ê³ 
> **Suspense**: ê·¸ë™ì•ˆ `fallback` UIë¥¼ ë³´ì—¬ì£¼ë‹¤ê°€, ì¤€ë¹„ë˜ë©´ ì‹¤ì œ ì»´í¬ë„ŒíŠ¸ë¡œ êµì²´í•©ë‹ˆë‹¤.

---

## 4. React.lazy()ì™€ dynamic importì˜ ê´€ê³„ ğŸ§ 

ì‚¬ì‹¤ React.lazy()ì˜ ì¸ìëŠ” ê·¸ëƒ¥ **dynamic importë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜**ì…ë‹ˆë‹¤.

```jsx
const SomeComponent = React.lazy(() => import('./SomeComponent'))
```

ì´ ë§ì€ ê³§â€¦

* ë²ˆë“¤ëŸ¬(Webpack, Vite, Rollup)ëŠ” `import()`ë¥¼ ë§Œë‚˜ë©´ í•´ë‹¹ ëª¨ë“ˆì„ **ë³„ë„ì˜ ì²­í¬ íŒŒì¼**ë¡œ ë¶„ë¦¬
* ì´í›„ `SomeComponent`ê°€ ì‹¤ì œë¡œ ë Œë”ë§ë  ë•Œ,

  * ì´ ì²­í¬ íŒŒì¼ì„ ë„¤íŠ¸ì›Œí¬ë¡œ ìš”ì²­
  * ê·¸ ê²°ê³¼ë¥¼ ë°›ì•„ì„œ ì»´í¬ë„ŒíŠ¸ íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©

ì¦‰, React.lazy()ëŠ”

> â€œdynamic importë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ê³ , ì´ ë¡œë”© ìƒíƒœë¥¼ Reactì˜ ë Œë”ë§ ì‚¬ì´í´ê³¼ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°í•´ ì£¼ëŠ” í—¬í¼â€

ë¼ê³  ì´í•´í•˜ì‹œë©´ ë©ë‹ˆë‹¤. ğŸš€

---

## 5. ë°˜ë“œì‹œ Suspenseê°€ í•„ìš”í•œ ì´ìœ  ğŸ›Ÿ

ì™œ `Suspense` ì—†ì´ lazy ì»´í¬ë„ŒíŠ¸ë¥¼ ë°”ë¡œ ë Œë”ë§í•˜ë©´ ì•ˆ ë ê¹Œìš”?

```jsx
// âŒ ì´ë ‡ê²Œ í•˜ë©´ ì—ëŸ¬
const AdminPage = React.lazy(() => import('./AdminPage'))

export default function App() {
  return (
    <div>
      <AdminPage /> {/* Suspense ì—†ìŒ â†’ ëŸ°íƒ€ì„ ì—ëŸ¬ */}
    </div>
  )
}
```

React.lazy ì»´í¬ë„ŒíŠ¸ëŠ” â€œë Œë”ë§ í•˜ë‹¤ê°€ Promiseë¥¼ ë˜ì§€ëŠ”â€ í˜•íƒœë¡œ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
(React 18ì˜ ë™ì‹œì„± ëª¨ë¸ì—ì„œ, SuspenseëŠ” **Promise ê¸°ë°˜ì˜ ëŒ€ê¸° ë©”ì»¤ë‹ˆì¦˜**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.)

* lazy ì»´í¬ë„ŒíŠ¸ ë Œë” ì¤‘:

  * â€œì•„ì§ íƒ€ì…ì´ ì¤€ë¹„ ì•ˆ ëì–´!â€ â†’ Promiseë¥¼ ë˜ì§
* SuspenseëŠ” ì„œë¸ŒíŠ¸ë¦¬ì—ì„œ ì´ëŸ° Promiseë¥¼ ìºì¹˜í•´ì„œ:

  * â€œì˜¤ì¼€ì´, ì¤€ë¹„ë  ë•Œê¹Œì§€ fallback ë³´ì—¬ì¤„ê²Œâ€

ë§Œì•½ Suspenseê°€ ì—†ìœ¼ë©´ ì´ PromiseëŠ” ì–´ë””ì—ì„œë„ ì²˜ë¦¬ë˜ì§€ ì•Šê³ ,
ë°”ë¡œ ëŸ°íƒ€ì„ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.

> ê·¸ë˜ì„œ ReactëŠ” `React.lazy`ë¡œ ë§Œë“  ì»´í¬ë„ŒíŠ¸ëŠ” í•­ìƒ Suspenseë¡œ ê°ì‹¸ë¼ê³  ê°•ì œí•©ë‹ˆë‹¤. âœ…

---

## 6. ê¸°ë³¸ ì˜ˆì œ: í˜ì´ì§€ ë‹¨ìœ„ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… ğŸŒ

ê°€ì¥ í”í•œ íŒ¨í„´ì€ â€œí˜ì´ì§€ ë‹¨ìœ„â€ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…ì…ë‹ˆë‹¤.

```jsx
// routes/Home.jsx
export default function Home() {
  return <h2>Home</h2>
}

// routes/About.jsx
export default function About() {
  return <h2>About</h2>
}

// App.jsx
import { Suspense, useState } from 'react'

const Home = React.lazy(() => import('./routes/Home'))
const About = React.lazy(() => import('./routes/About'))

export default function App() {
  const [page, setPage] = useState('home')

  return (
    <div>
      <nav>
        <button onClick={() => setPage('home')}>Home</button>
        <button onClick={() => setPage('about')}>About</button>
      </nav>

      <Suspense fallback={<p>í˜ì´ì§€ ë¡œë”© ì¤‘...</p>}>
        {page === 'home' && <Home />}
        {page === 'about' && <About />}
      </Suspense>
    </div>
  )
}
```

* ì•± ì²˜ìŒ ì‹¤í–‰ ì‹œ:

  * `Home` ë˜ëŠ” `About` ì¤‘ í•„ìš”í•œ í˜ì´ì§€ì˜ ì²­í¬ë§Œ ë¡œë”©
* ì‚¬ìš©ìê°€ `About` ë²„íŠ¼ì„ ëˆ„ë¥´ëŠ” ìˆœê°„:

  * ì•„ì§ About ì²­í¬ë¥¼ ì•ˆ ë°›ì•˜ë‹¤ë©´, ë„¤íŠ¸ì›Œí¬ ìš”ì²­ í›„ `fallback` ë³´ì—¬ì£¼ê¸°
  * ë¡œë”©ì´ ëë‚˜ë©´ `About` í™”ë©´ ë Œë”ë§

ì´ê²Œ ë°”ë¡œ **ì‚¬ìš©ì í–‰ë™(ë„¤ë¹„ê²Œì´ì…˜)ì— ë”°ë¼ ì½”ë“œê°€ í•„ìš”í•œ ìˆœê°„ì—ë§Œ ë¡œë“œë˜ëŠ” íŒ¨í„´**ì…ë‹ˆë‹¤. ğŸƒâ€â™‚ï¸

---

## 7. React Routerì™€ í•¨ê»˜ ì“°ê¸° ğŸ§­

ì‹¤ë¬´ì—ì„œ React.lazy()ëŠ” ê±°ì˜ í•­ìƒ **ë¼ìš°íŒ…ê³¼ í•¨ê»˜** ì‚¬ìš©ë©ë‹ˆë‹¤.

```jsx
// App.jsx
import { BrowserRouter, Routes, Route } from 'react-router-dom'
import { Suspense } from 'react'

const Home = React.lazy(() => import('./pages/Home'))
const About = React.lazy(() => import('./pages/About'))
const Admin = React.lazy(() => import('./pages/Admin'))

export default function App() {
  return (
    <BrowserRouter>
      <Suspense fallback={<p>í˜ì´ì§€ ë¡œë”© ì¤‘ì…ë‹ˆë‹¤...</p>}>
        <Routes>
          <Route path="/" element={<Home />} />
          <Route path="/about" element={<About />} />
          <Route path="/admin" element={<Admin />} />
        </Routes>
      </Suspense>
    </BrowserRouter>
  )
}
```

* `/` ì ‘ì† â†’ `Home` ì²­í¬ë§Œ í•„ìš”
* `/about`ë¡œ ì´ë™ â†’ ê·¸ ë•Œ `About` ì²­í¬ë¥¼ ë¡œë”©
* `/admin` ì§„ì…í•  ë•Œë§Œ Admin ì²­í¬ë¥¼ ë¡œë”©

ì´ë ‡ê²Œ í•˜ë©´ **ë¼ìš°íŠ¸ ë‹¨ìœ„ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…**ì´ ìì—°ìŠ¤ëŸ½ê²Œ ë©ë‹ˆë‹¤.
K-ë””ì§€í„¸ êµìœ¡ì—ì„œ â€œë¼ìš°íŠ¸ ë ˆë²¨ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…â€ ì„¤ëª…í•  ë•Œ ë”± ì¢‹ì€ ì˜ˆì‹œì…ë‹ˆë‹¤. ğŸ“

---

## 8. React.lazy()ì˜ ì œì•½ì‚¬í•­ë“¤ âš ï¸

### 8.1. default exportë§Œ ì§€ì›

```jsx
// âœ… OK
export default function AdminPage() { ... }

// âŒ ì•„ë˜ì²˜ëŸ¼ named exportë§Œ ìˆìœ¼ë©´ lazyì—ì„œ ì˜¤ë¥˜
export function AdminPage() { ... }
```

`React.lazy(() => import('./AdminPage'))`ëŠ”
**ë°˜ë“œì‹œ default exportëœ ì»´í¬ë„ŒíŠ¸ë¥¼ ê¸°ëŒ€**í•©ë‹ˆë‹¤.

ë§Œì•½ named exportë¥¼ ì“°ê³  ìˆë‹¤ë©´:

```jsx
// AdminPage.jsx
export function AdminPage() {
  return <h2>Admin</h2>
}

// App.jsx
const AdminPage = React.lazy(() =>
  import('./AdminPage').then(module => ({ default: module.AdminPage }))
)
```

ì´ë ‡ê²Œ `then()`ì—ì„œ default í˜•íƒœë¡œ ë³€í™˜í•´ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### 8.2. SSR(ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§)ì—ì„œì˜ ì£¼ì˜ì 

* React.lazyëŠ” ì›ë˜ **í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…**ì— ì´ˆì 
* React 18ì—ì„œëŠ” ì„œë²„ì—ì„œ Suspenseë¥¼ ì–´ëŠ ì •ë„ ì§€ì›í•˜ì§€ë§Œ,

  * ë²ˆë“¤ë§/ë¡œë“œ ì „ëµì„ ë³„ë„ë¡œ ì„¤ê³„í•´ì•¼ í•©ë‹ˆë‹¤.
* Next.js ê°™ì€ í”„ë ˆì„ì›Œí¬ëŠ” ìì²´ì ìœ¼ë¡œ ë” ì„¸ë ¨ëœ lazy ë¡œë”© API(`next/dynamic`)ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

ê°•ì˜ì—ì„œ ì–¸ê¸‰í•  í¬ì¸íŠ¸:

> â€œìˆœìˆ˜ CRA/Vite + React.lazyëŠ” **CSR ê¸°ë°˜**ì—ì„œ ìƒê°í•˜ëŠ” ê²Œ í¸í•˜ê³ ,
> SSR í”„ë ˆì„ì›Œí¬(Next.js ë“±)ì—ì„œëŠ” ê·¸ í”„ë ˆì„ì›Œí¬ê°€ ì œê³µí•˜ëŠ” `dynamic()` APIë¥¼ ì‚¬ìš©í•˜ëŠ” í¸ì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.â€

---

### 8.3. Suspense ê²½ê³„ ì„¤ê³„

Suspense boundaryë¥¼ **ë„ˆë¬´ í¬ê²Œ** ì¡ìœ¼ë©´?

* ì¡°ê¸ˆë§Œ lazy ì»´í¬ë„ŒíŠ¸ê°€ ë¡œë”© ì¤‘ì´ì–´ë„
* ì „ì²´ í° ì˜ì—­ì´ `fallback`ìœ¼ë¡œ í†µì§¸ë¡œ ë°”ë€Œì–´ë²„ë ¤ì„œ UXê°€ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë°˜ëŒ€ë¡œ **ë„ˆë¬´ ì˜ê²Œ** ìª¼ê°œë©´?

* Suspenseê°€ ë„ˆë¬´ ë§ì•„ì§€ê³ ,
* ë„ˆë¬´ ìì£¼ ë¡œë”© ìŠ¤í”¼ë„ˆê°€ ë‚˜íƒ€ë‚¬ë‹¤ ì‚¬ë¼ì¡Œë‹¤ í•´ì„œ ì–´ì§€ëŸ¬ìš¸ ìˆ˜ ìˆìŒ ğŸ™ƒ

ì‹¤ë¬´ì—ì„œëŠ” ë³´í†µ:

* **í˜ì´ì§€ ìƒë‹¨ ì „ì²´ ì˜ì—­**ì„ ê°ì‹¸ëŠ” Suspense (ë¼ìš°íŠ¸ ë ˆë²¨)
* ë˜ëŠ” **íŠ¹ì • ë¬´ê±°ìš´ ìœ„ì ¯ ë‹¨ìœ„**ë¡œë§Œ Suspenseë¥¼ ê°ì‹¸ëŠ” ì „ëµì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

## 9. ì—ëŸ¬ í•¸ë“¤ë§: lazy + Suspense + ErrorBoundary ğŸ§±

ë„¤íŠ¸ì›Œí¬ ë¬¸ì œë¡œ ì²­í¬ë¥¼ ëª» ë°›ì•„ì˜¤ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”?
ì´ ë•ŒëŠ” ë³´í†µ **ErrorBoundary**ì™€ ê°™ì´ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´ì´ ì œì¼ ì¢‹ìŠµë‹ˆë‹¤.

```jsx
// ErrorBoundary.jsx
import React from 'react'

export class ErrorBoundary extends React.Component {
  state = { hasError: false }

  static getDerivedStateFromError() {
    return { hasError: true }
  }

  componentDidCatch(error, info) {
    console.error('Lazy component load error', error, info)
  }

  render() {
    if (this.state.hasError) {
      return <p>ë¬´ì–¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>
    }
    return this.props.children
  }
}
```

```jsx
// App.jsx
import { Suspense } from 'react'
import { ErrorBoundary } from './ErrorBoundary'

const AdminPage = React.lazy(() => import('./AdminPage'))

export default function App() {
  return (
    <ErrorBoundary>
      <Suspense fallback={<p>ê´€ë¦¬ì í˜ì´ì§€ ë¡œë”© ì¤‘...</p>}>
        <AdminPage />
      </Suspense>
    </ErrorBoundary>
  )
}
```

ì´ë ‡ê²Œ í•˜ë©´:

* ë¡œë”© ì¤‘ì—ëŠ” `fallback`
* ë¡œë”© ì‹¤íŒ¨(ì²­í¬ ëª» ë°›ìŒ ë“±) â†’ ErrorBoundaryì—ì„œ ì—ëŸ¬ UI í‘œì‹œ

---

## 10. ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•œ íŒë“¤ âš™ï¸

### 10.1. Prefetching / Preloading íŒ¨í„´

â€œë¡œë”© ìˆœê°„ ì™„ì „íˆ ìƒˆí•˜ì–€ í™”ë©´ â†’ ì‹«ë‹¤â€
ê·¸ëŸ´ ë•ŒëŠ”, ì‚¬ìš©ìê°€ ë²„íŠ¼ì„ í´ë¦­í•˜ê¸° **ì¡°ê¸ˆ ì „**ì— ë¯¸ë¦¬ ë¡œë”©ì„ ì‹œì‘í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

ì˜ˆì‹œ íŒ¨í„´ (ì°¸ê³ ìš©):

```jsx
const AdminPage = React.lazy(() => import('./AdminPage'))

// ë¯¸ë¦¬ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜
function preloadAdmin() {
  import('./AdminPage')
}

export default function App() {
  const [open, setOpen] = useState(false)

  return (
    <div>
      {/* ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¸ì„ ë•Œ ë¯¸ë¦¬ ë¡œë“œ */}
      <button
        onMouseEnter={preloadAdmin}
        onFocus={preloadAdmin}
        onClick={() => setOpen(true)}
      >
        Admin ì—´ê¸°
      </button>

      <Suspense fallback={<p>Admin ë¡œë”© ì¤‘...</p>}>
        {open && <AdminPage />}
      </Suspense>
    </div>
  )
}
```

* ë²„íŠ¼ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ëŠ” ìˆœê°„ ì´ë¯¸ `import('./AdminPage')` í˜¸ì¶œ â†’ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë¡œë“œ
* ì‹¤ì œ í´ë¦­ ì‹œì—ëŠ” ì´ë¯¸ ë¡œë”©ì´ ëë‚¬ì„ ê°€ëŠ¥ì„±ì´ ë†’ìŒ â†’ `fallback` ê±°ì˜ ì•ˆ ë³´ì„

ì´ëŸ° ì‹ì˜ â€œUX ìµœì í™”â€ë„ React.lazy() ì£¼ë³€ì—ì„œ ìì£¼ ì“°ì´ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤. âœ¨

---

## 11. ì¼ë°˜ import vs React.lazy() ë¹„êµ ì •ë¦¬ ğŸ“Š

| í•­ëª©        | ì¼ë°˜ import               | React.lazy() + Suspense                     |
| --------- | ----------------------- | ------------------------------------------- |
| import ì‹œì  | ì•± ì‹œì‘ ì‹œ í•œ ë²ˆì— ëª¨ë‘          | í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ê°€ ì‹¤ì œë¡œ í•„ìš”í•´ì§ˆ ë•Œ                         |
| ë²ˆë“¤ êµ¬ì¡°     | í° ë‹¨ì¼ ë²ˆë“¤(ë˜ëŠ” í° ëª‡ ê°œ)       | ì—¬ëŸ¬ ì‘ì€ ì²­í¬ë¡œ ìë™ ë¶„í•                              |
| ì´ˆê¸° ë¡œë”© ì†ë„  | ëŠë ¤ì§ˆ ìˆ˜ ìˆìŒ                | ë” ë¹ ë¥´ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŒ                               |
| ëŸ°íƒ€ì„ ì‚¬ìš©ë²•   | `<Component />` ë°”ë¡œ ì‚¬ìš©   | `<Suspense><LazyComponent /></Suspense>` í•„ìš” |
| ì—ëŸ¬ ì²˜ë¦¬     | ì¼ë°˜ì ì¸ ë Œë”ë§ ì—ëŸ¬             | ErrorBoundary + Suspense íŒ¨í„´ ê¶Œì¥              |
| SSR í˜¸í™˜ì„±   | í”„ë ˆì„ì›Œí¬ì— ë”°ë¼ ë‹¤ë¥´ì§€ë§Œ ê¸°ë³¸ì ìœ¼ë¡œ ì‰¬ì›€ | ë³„ë„ì˜ ê³ ë ¤ í•„ìš” (CSR ìœ„ì£¼ë¡œ ìƒê°í•˜ë©´ í¸í•¨)                 |

---

## 12. ì •ë¦¬: React.lazy()ë¥¼ ì–´ë–»ê²Œ ì„¤ëª…í•˜ë©´ ì¢‹ì„ê¹Œ? ğŸ§¾

React.lazy()ëŠ” í•œ ì¤„ë¡œ ì •ë¦¬í•˜ë©´:

> **â€œì»´í¬ë„ŒíŠ¸ë¥¼ í•„ìš”í•  ë•Œë§Œ ë„¤íŠ¸ì›Œí¬ì—ì„œ ê°€ì ¸ì˜¤ê²Œ ë§Œë“¤ì–´ ì£¼ëŠ”, Suspense ê¸°ë°˜ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… ë„ìš°ë¯¸â€** ğŸ¯

ê°•ì˜ ë˜ëŠ” ë¸”ë¡œê·¸ì—ì„œ ê°•ì¡°í•˜ë©´ ì¢‹ì€ í¬ì¸íŠ¸:

1. **ë¬¸ì œ ì¸ì‹**: SPAì˜ ë²ˆë“¤ ë¹„ëŒ€í™” â†’ ì´ˆê¸° ë¡œë”© ëŠë¦¼
2. **í•´ê²° ì „ëµ**: ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…, dynamic import
3. **Reactì˜ í•´ë²•**: `React.lazy()` + `<Suspense>` ì¡°í•©
4. **ì‚¬ìš© íŒ¨í„´**:

   * í˜ì´ì§€/ë¼ìš°íŠ¸ ë‹¨ìœ„ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…
   * ë¬´ê±°ìš´ ìœ„ì ¯/ì°¨íŠ¸/ì—ë””í„° lazy ë¡œë”©
   * Admin, í†µê³„, ì„¤ì • ë“± â€œìì£¼ ì•ˆ ë“¤ì–´ì˜¤ëŠ” í™”ë©´â€ì„ lazy ì²˜ë¦¬
5. **ì£¼ì˜ì‚¬í•­**:

   * default export í•„ìš”
   * ë°˜ë“œì‹œ Suspenseë¡œ ê°ì‹¸ê¸°
   * ErrorBoundaryì™€ ê°™ì´ ì“°ë©´ ë” ì¢‹ìŒ
6. **ê³ ê¸‰ íŒ¨í„´**:

   * mouse enter ì‹œ prefetch
   * route-level Suspense ê²½ê³„ ì„¤ê³„


